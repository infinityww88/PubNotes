<html>
    <head>
        <title>tmux quick</title>
        <style>
            li {
                margin-left: -1em;
            }
        </style>
    </head>
    <body>
        <h2 style="text-align: center;">tmux quick</h2>
        <h3>Tmux的作用</h3>
        tmux的作用就是会话与窗口解绑，将它们彻底分离。
        <ul>
            <li>
                它允许在单个窗口中，同时访问多个session。这对于同时运行多个命令行程序很有用
            </li>
            <li>
                它可以让新窗口接入已经存在的会话
            </li>
            <li>
                它允许每个会话有多个连接窗口，因此可以多人实时共享会话
            </li>
            <li>
                它支持窗口的任意垂直和水平拆分
            </li>
        </ul>
        <h3>启动与退出</h3>
        <p>
            在shell中输入<code>tmux</code>进入tmux窗口，C-d或exit命令退出tmux窗口
        </p>
        <h3>前缀键</h3>
        <p>
            前缀键唤起tmux命令。默认C-b。
        </p>
        <h3>会话管理</h3>
        <h4>新建会话</h4>
        <p>
            第一个启动的窗口编号0，第二个窗口编号1，依此类推。这些窗口对应的会话就是session0, session1
        </p>
        <p>
            <code>tmux new -s &lt;session-name&gt;</code>为会话起一个名字，使用编号区分会话不直观
        </p>
        <h4>分离会话</h4>
        <p>
            在tmux窗口中，按下“C-b d”或者输入<code>tmux detach</code>命令，将会将当前会话与窗口分离。分离后，就会退出当前tmux窗口，但是会话和里面的进程仍然在后台运行。
        </p>
        <h4>查看会话</h4>
        <p>
            <code>tmux ls</code>命令可以查看当前tmux会话
        </p>
        <h4>挂载会话</h4>
        <p>
            <code>tmux attach-session -t (session-number|session-name)</code>命令重新接入某个已经存在的会话
        </p>
        <h4>杀死会话</h4>
        <p>
            <code>tmux kill-session -t (session-number|session-name)</code>命令杀死某个已经存在的会话
        </p>
        <h4>切换会话</h4>
        <p>
            <code>tmux switchc -t (session-number|session-name)</code>命令切换会话
        </p>
        <h4>重命名会话</h4>
        <p>
            <code>tmux rename-session -t 0 &lt;new-name&gt;</code>重命名session0
        </p>
        <h4>会话快捷键</h4>
        <ul>
            <li>C-b d：分离当前会话(detach)</li>
            <li>C-b s：列出所有会话(show)</li>
            <li>C-b $：重命名当前会话(bash变量名前缀，赋值重新定义变量的值)</li>
        </ul>
        <h3>最简单操作流程</h3>
        <ol>
            <li>新建会话<code>tmux new -s my_session</code></li>
            <li>在tmux窗口运行所需要的程序</li>
            <li>用快捷键C-b d将会话分离</li>
            <li>用命令<code>tmux attach-session -t my_session</code>重新连接到会话</li>
        </ol>
        <h3>面板操作</h3>
        <p>
            tmux可以将window分割为多个面板pane，每个pane都是一个独立的伪终端。初始tmux窗口包含一个全屏的面板
        </p>
        <h4>划分面板</h4>
        <p>
            <code>tmux split-window</code> 将当前面板分割为上下两个面板<br />
            <code>tmux split-window -h</code> 将当前面板分割为左右两个面板<br />
        </p>
        <h4>移动光标</h4>
        <p>
            <code>tmux select-pane -U</code> 将光标移动到上方的pane<br />
            <code>tmux select-pane -D</code> 将光标移动到上方的pane<br />
            <code>tmux select-pane -L</code> 将光标移动到上方的pane<br />
            <code>tmux select-pane -R</code> 将光标移动到上方的pane<br />
        </p>
        <h4>移动面板</h4>
        <p>
            <code>tmux swap-pane -U</code> 将面板上移
            <code>tmux swap-pane -D</code> 将面板下移
        </p>
        <h4>面板快捷键</h4>
        <ul>
            <li>
                C-b %: 划分左右两个窗格
            </li>
            <li>

                C-b ": 划分上下两个窗格
            </li>
            <li>
                C-b &lt;arrow key&gt;: 移动光标到其他面板
            </li>
            <li>
                C-b ;: 光标切换到上一个面板
            </li>
            <li>
                C-b o: 光标切换到下一个面板
            </li>
            <li>
                C-b {: 当前面板左移
            </li>
            <li>
                C-b }: 当前面板右移
            </li>
            <li>
                C-b C-o: 当前面板上移
            </li>
            <li>
                C-b Alt-o: 当前面板下移
            </li>
            <li>
                C-b x: 关闭当前窗格
            </li>
            <li>
                C-b !: 将当前面板拆分为独立到一个widnow
            </li>
            <li>
                C-b z: 当前面板全屏显示，在使用一次变回原来大小
            </li>
            <li>
                C-b C-&lt;arrow key&gt;: 按箭头方向调整面板大小
            </li>
            <li>
                C-b q: 显示窗格编号
            </li>
        </ul>
        <h3>窗口管理</h3>
        <p>
            一个window可以划分为多个pane，tmux还可以在一个session中创建多个window
        </p>
        <h4>新建窗口</h4>
        <p>
            <code>tmux new-window</code> 命令用来创建新窗口<br />
            <code>tmux new-window -n &lt;window-name&gt;</code> 命令用来创建新窗口
        </p>
        <h4>切换窗口</h4>
        <p>
            <code>tmux select-window -t (widnow-number|window-name)</code>命令用来切换窗口
        </p>
        <h4>重命名窗口</h4>
        <p>
            <code>tmux rename-window &lt;new-name&gt;</code> 命令重命名窗口
        </p>
        <h4>窗口快捷键</h4>
        <ul>
            <li>
                C-b c: 创建一个新窗口，状态栏显示多个窗口的信息
            </li>
            <li>
                C-b p: 切换到上一个窗口（按照状态栏上的顺序）
            </li>
            <li>
                C-b n: 切换到下一个窗口
            </li>
            <li>
                C-b &lt;number&gt;: 切换到指定编号到窗口
            </li>
            <li>
                C-b w: 从列表中选择窗口
            </li>
            <li>
                C-b ,: 窗口重命名
            </li>
        </ul>
        <h3>其他命令</h3>
        <p>
            <code>tmux list-keys</code>列出所有快捷键，及其对应到tmux命令
        </p>
        <p>
            <code>tmux list-commands</code>列出tmux所有命令和参数
        </p>
        <p>
            <code>tmux info</code>列出tmux所有session信息
        </p>
        <p>
            <code>tmux source-file ~/.tmux.conf</code>加载指定tmux配置文件
        </p>
        <h3>Tips</h3>
        <p>
            tmux是一个窗口管理器，它允许你在一个terminal widnow中创建多个窗口和面板
        </p>
        <p>
            tmux保存windows和panes在一个session中。你可以在任何时候退出session。这个过程成为detaching。tmux使用tmux server管理保存所有session，直到你重启server（例如reboot）。这非常有用，因为在之后的任何时候，你可以从你离开的地方拾取一个session，这个过程成为attaching。
        </p>
        <p>
            tmux两个最主要特性就是<code>窗口管理</code>和<code>会话管理</code>
        </p>
        <p>
            tmux session被tmux server管理。一旦创建，它和它管理的所有windows、所有panes(伪终端)都不会被意外终止，除非server被杀掉。tmux进程只是tmux server的client，用于向server发出命令创建、删除、访问session。默认进入tmux之后，没有加载任何session，只是一个空的shell。一个session包含多个windows，一个windows包含多个panes，每个panes都是独立的伪终端。当session所有window都退出后，session也自动被销毁。
        </p>
        <p>
            <strong style="color: #2d8edf;">快捷键太难记，因此除了对频繁使用的操作使用快捷键，其他操作统一使用命令操作</strong>
        </p>
    </body>
</html>